{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '42059071-0978dc0d7158b742eee7c30f5';\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const params = {\n    page: currentPage,\n    per_page: 13,\n  };\n\n  const resp = await axios.get(url, { params });\n  return resp.data;\n}\ngetImages();\n","function templateImage(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    downloads,\n    comments,\n  } = image;\n  return `<a href=\"${largeImageURL}\" class=\"card\">\n      <li>\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        <p><b>Views: </b>${views}</p>\n        <p><b>Likes: </b>${likes}</p>\n        <p><b>Comments: </b>${comments}</p>\n        <p><b>Downloads: </b>${downloads}</p>\n      </li>\n    </a>`;\n}\n\nexport function showImages(images) {\n  return images.map(templateImage).join('');\n}\n","import { getImages } from './js/api';\nimport { showImages } from './js/render';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.js-form'),\n  gallery: document.querySelector('.js-gallery'),\n  more: document.querySelector('.js-more'),\n  loader: document.querySelector('.loader'),\n};\nlet query;\nlet page;\nlet lastPage;\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.more.addEventListener('click', onMore);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n  showLoad();\n  page = 1;\n\n  query = ev.target.elements.query.value.trim();\n  if (!query) {\n    iziToast.error({\n      title: 'Error!',\n      message: 'No query!',\n      position: 'center',\n    });\n    hideMore();\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  const data = await getImages(query, page);\n\n  if (data.total === 0) {\n    iziToast.error({\n      title: 'Sorry',\n      message: 'No matches found for your search query.',\n      position: 'center',\n    });\n\n    refs.form.elements.query.value = '';\n\n    return;\n  }\n  renderImages(data.hits);\n  lastPage = Math.ceil(data.totalHits / 13);\n  checkMore();\n  hideLoad();\n\n  ev.target.reset();\n}\n\nasync function onMore() {\n  page += 1;\n  showLoad();\n\n  const data = await getImages(query, page);\n\n  renderImages(data.hits);\n  hideLoad();\n  checkMore();\n\n  const height = refs.gallery.firstElementChild.getClientRects().height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n\nfunction renderImages(images) {\n  const markup = showImages(images);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showMore() {\n  refs.more.classList.remove('invisible');\n}\n\nfunction hideMore() {\n  refs.more.classList.add('invisible');\n}\n\nfunction checkMore() {\n  if (page >= lastPage) {\n    hideMore();\n  } else {\n    showMore();\n  }\n}\nfunction showLoad() {\n  refs.loader.classList.remove('invisible');\n}\n\nfunction hideLoad() {\n  refs.loader.classList.add('invisible');\n}\n"],"names":["getImages","query","currentPage","url","params","axios","templateImage","image","largeImageURL","webformatURL","tags","likes","views","downloads","comments","showImages","images","refs","page","lastPage","onSubmit","onMore","ev","showLoad","iziToast","hideMore","data","renderImages","checkMore","hideLoad","height","markup","showMore"],"mappings":"6vBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAIlD,MAAMC,EAAM,qEAAgC,mBAC1CF,CACD,CAAA,2DACKG,EAAS,CACb,KAAMF,EACN,SAAU,EACd,EAGE,OADa,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACd,CACAJ,EAAW,ECjBX,SAASM,EAAcC,EAAO,CAC5B,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,UAAAC,EACA,SAAAC,CACD,EAAGP,EACJ,MAAO,YAAYC,CAAa;AAAA;AAAA,oBAEdC,CAAY,UAAUC,CAAI;AAAA,2BACnBE,CAAK;AAAA,2BACLD,CAAK;AAAA,8BACFG,CAAQ;AAAA,+BACPD,CAAS;AAAA;AAAA,SAGxC,CAEO,SAASE,EAAWC,EAAQ,CACjC,OAAOA,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,CAC1C,CClBA,MAAMW,EAAO,CACX,KAAM,SAAS,cAAc,UAAU,EACvC,QAAS,SAAS,cAAc,aAAa,EAC7C,KAAM,SAAS,cAAc,UAAU,EACvC,OAAQ,SAAS,cAAc,SAAS,CAC1C,EACA,IAAIhB,EACAiB,EACAC,EAEJF,EAAK,KAAK,iBAAiB,SAAUG,CAAQ,EAC7CH,EAAK,KAAK,iBAAiB,QAASI,CAAM,EAE1C,eAAeD,EAASE,EAAI,CAM1B,GALAA,EAAG,eAAc,EACjBC,IACAL,EAAO,EAEPjB,EAAQqB,EAAG,OAAO,SAAS,MAAM,MAAM,OACnC,CAACrB,EAAO,CACVuB,EAAS,MAAM,CACb,MAAO,SACP,QAAS,YACT,SAAU,QAChB,CAAK,EACDC,IACA,MACD,CACDR,EAAK,QAAQ,UAAY,GACzB,MAAMS,EAAO,MAAM1B,EAAUC,EAAOiB,CAAI,EAExC,GAAIQ,EAAK,QAAU,EAAG,CACpBF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,QAChB,CAAK,EAEDP,EAAK,KAAK,SAAS,MAAM,MAAQ,GAEjC,MACD,CACDU,EAAaD,EAAK,IAAI,EACtBP,EAAW,KAAK,KAAKO,EAAK,UAAY,EAAE,EACxCE,IACAC,IAEAP,EAAG,OAAO,OACZ,CAEA,eAAeD,GAAS,CACtBH,GAAQ,EACRK,IAEA,MAAMG,EAAO,MAAM1B,EAAUC,EAAOiB,CAAI,EAExCS,EAAaD,EAAK,IAAI,EACtBG,IACAD,IAEA,MAAME,EAASb,EAAK,QAAQ,kBAAkB,eAAgB,EAAC,OAC/D,SAAS,CACP,SAAU,SACV,IAAKa,EAAS,CAClB,CAAG,CACH,CAEA,SAASH,EAAaX,EAAQ,CAC5B,MAAMe,EAAShB,EAAWC,CAAM,EAChCC,EAAK,QAAQ,mBAAmB,YAAac,CAAM,CACrD,CAEA,SAASC,GAAW,CAClBf,EAAK,KAAK,UAAU,OAAO,WAAW,CACxC,CAEA,SAASQ,GAAW,CAClBR,EAAK,KAAK,UAAU,IAAI,WAAW,CACrC,CAEA,SAASW,GAAY,CACfV,GAAQC,EACVM,IAEAO,GAEJ,CACA,SAAST,GAAW,CAClBN,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASY,GAAW,CAClBZ,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC"}